### JavaScript 中的作用域是什么意思?
1.作用域是什么？定义解释
JS中的作用域指的就是代码在执行时形成的执行上下文，也可以说是代码执行的环境栈内存空间，通俗的来说作用域就是变量能够访问的范围。
2.作用域的分类
JS中的作用域分为以下三类：
1.全局作用域：浏览器引擎在解析及执行JS代码前形成的一个供JS代码执行的环境，也叫作栈内存或者说全局执行上下文，只有在浏览器页面关闭的情况下才会将此部分内存空间回收。
2.函数作用域：JS中的函数在执行时形成的私有作用域，如果是普通函数执行，那么在函数执行完成之后这部分内存空间会被浏览器的垃圾回收机制所回收。
3.块级作用域:ES6新增的概念，当let和const声明的变量会形成块级作用域，块级作用域在执行代码的时候也会形成一个私有的作用域。在块级作用域外部无法访问到内部变量。

### 闭包是什么？
闭包是函数，闭包是一个可以访问或者有权访问其他函数私有作用域中私有变量的函数。

闭包最常见的一个作用就是可以在函数外部访问函数私有变量的功能，而一般情况下外部环境是不可访问函数内部私有变量的，由于存在当前函数环境中存在指向父级作用域的引用，所以当前函数作用域无法销毁从而私有变量可以一直被保存起来。

闭包产生的原因(从作用域链角度来回答)
当JS引擎在访问一个变量时，会首先在当前的作用域中进行查找，如果找不到再去上一级作用域中查找直到全局window作用域下，如果最后还是没找到就报错，这种查找变量的机制叫做作用域链查找机制。

每一个函数执行时都会形成一个私有作用域，当前函数一般都会存在上层函数的作用域的引用，最终形成一个作用域链。

闭包产生的本质就是：当前环境中存在指向父级作用域的引用。
也就是说不一定一个函数是通过return出去的，只要某个环境下存在指向父级作用域中的引用，那么就会产生闭包。

```

function fun1() {
  var a = 2
  function fun2() {
    console.log(a);  //2
  }
  return fun2;
}
var result = fun1();全局作用域中的result变量引用了函数fun1私有作用域中定义的函数fun2(堆内存),所以形成了闭包
result();
```

```
var fun3;
function fun1() {
  var a = 2
  fun3 = function() {
    console.log(a);
  }
}
fun1();函数执行后全局变量fun3引用了函数fun1私有作用域中定义的匿名函数，所以形成了闭包
fun3();执行fun3函数，就可以在全局中访问到fun1作用域的私有变量a

```


### 闭包会在哪些场景中使用？
1.闭包可以通过return一个函数的方法，让外部环境访问函数内部私有变量，其实这里是用到了闭包的保护机制

2.在单例模式下的命名空间中保存每一个小组成员自己定义的变量和方法，防止出现全局变量污染。

3.所有异步使用了回调函数的地方，其实都是使用了闭包。
比如定时器，事件监听，ajax请求等等。


### 通过定时器循环输出自增的数字通过 JS 的代码如何实现？
```
for(var i = 1; i <= 5; i ++){
  setTimeout(function() {
    console.log(i)
  }, 0)
}

```
>>> 1.为什么以上代码执行之后打印的都是6？
+ 浏览器的evenLoop角度
  由于JS是单线程执行以及eventLoop事件循环机制，for循环是同步任务会优先被执行，而定时器是异步任务会在同步任务执行完成之后再去执行，所以for循环结束后全局变量i变为6，后续定时器执行的时候都是6
+ 闭包角度
  由于定时器其实本质也是一个闭包，其内部的函数在执行的时候遇到变量i，不是私有变量便向上一级查找，上一级是全局window对象，此时i已经变为6了，所以执行之后全部输出6。
+ 堆栈内存角度
  函数是引用值，引用值是存储在堆内存中的，并且函数在堆内存中是当做代码字符串存储的，对象是键值对。当函数执行的时候，才会根据内存地址找到这个堆并将原本是字符串的函数体放到当前函数的作用域中执行，所以定时器中代码在定义的时候只是字符串，只有执行的时候才变为js代码，这时候再去执行i，i已经变为6了。
  
>>> 2.要实现依次打印1-5，你有几种方案？
+ let方案 直接将var修改为let
+ 立即执行函数方案
```
for(var i = 1; i <= 5; i ++){
  (function(j){
	  setTimeout(function() {
	    console.log(j)
	  }, 0)
  })(i);
}
```
+ 定时器第三参数方案
```
for(let i = 1; i <= 5; i ++){
  setTimeout(function(j) {
    console.log(j)
  }, 0,i)
}
```
