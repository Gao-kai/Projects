## 箭头函数

#### 箭头函数含义

ES6中新增的定义函数的方式。其实说白了就是之前函数的一种简写方式。原来的function不要了，在圆括号和花括号之间加一个箭头。

#### 箭头函数写法

const fn =（）=> {};

> 一般定义一个变量，将箭头函数赋值给这个变量，在调用的时候调用这个变量就可以了，比如fn（）

#### 箭头函数的省略写法

1.如果有且仅有一个参数，那么小括号（）可以省略不写

2.如果有且仅有一个语句，那么大括号{}可以省略不写。不管这个语句是否有返回值，主要省略了大括号都默认为用return 语句返回了出去。

#### 箭头函数参数初始值

箭头函数中可以直接给形参赋初始值，而且这个参数往往是写在最后一位的

#### 什么时候用箭头函数比较多

当我们把一个函数A当作另外一个函数B的参数的时候，这个函数A被用作箭头函数的最多。

比如定时器中的回调函数，比如事件监听函数中的回调函数

#### 箭头函数中的this

箭头函数中的this指向谁，是取决于在哪里声明了这个箭头函数。

箭头函数中的this不会遵循谁调用指向谁的特性，一般情况下是固定的，所以只有通过call、apply、bind这些方法来强制修改箭头函数中的this。

#### 箭头函数面试题1

1.该题目中箭头函数的this指向的是该函数的定义位置，也就是fn函数内，而fn函数在全局作用域中，其内部的this原本指向window。

2.因为外部的call改变了fn中this的指向为obj并且调用了这个fn函数，所以fn中的this就指向obj，所以此时fn中定义的箭头函数中的this跟随fn一起，指向obj对象。

```javascript
const obj = { name: '张三'} 
 function fn () { 
     console.log(this);//this 指向 是obj对象
     return () => { 
         console.log(this);//this 指向 的是箭头函数定义的位置，那么这个箭头函数定义在fn里面，而这个fn指向是的obj对象，所以这个this也指向是obj对象
     } 
     
 } 
 const resFn = fn.call(obj); 
 resFn();  //指向fn中的this obj对象

```

#### 箭头函数面试题2

> 考察点：只有函数和全局变量才有作用域，定义在全局中的对象是没有作用域的，所以箭头函数虽然看起来是在obj中被定义的，但是obj自身没有作用域，所以箭头函数等于在全局中被定义了，此时的this指向的是window全局对象。

```javascript
var age = 100;
var obj = {
	age: 20,
	say: () => {
		alert(this.age)
	}
}
obj.say();//箭头函数this指向的是被声明的作用域里面，而对象没有作用域的，所以箭头函数虽然在对象中被定义，但是this指向的是全局作用域
```

#### 小结

- 箭头函数在简化一些数组方法的时候十分有用，但是不适合多级嵌套的函数。
- 箭头函数自身没有this关键字，所有存在于箭头函数中的this只能向外层的
- 如果在箭头函数中使用this，那么箭头函数中的this将指向箭头函数自身所定义位置中的this。可以简单理解成，定义箭头函数中的作用域的this指向谁，它就跟着指向谁
- 箭头函数的优点在于解决了this执行环境所造成的一些问题。比如：解决了匿名函数this指向的问题（匿名函数的执行环境具有全局性），包括setTimeout和setInterval中使用this所造成的问题



